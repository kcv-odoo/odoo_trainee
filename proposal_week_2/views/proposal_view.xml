<odoo>
    <record model="ir.ui.view" id="proposal_list">
        <field name="name">proposal.list</field>
        <field name="model">proposals.proposals</field>
        <field name="priority" eval='2'/>
        <field name="arch" type="xml">
            <tree>
                <field name="proposal_name"/>
                <field name="sales_man_id"/>
                <field name="customer_id"/>
                <field name="proposal_date" readonly="1"/>
                <field name="proposed_total_price"/>
                <field name="accepted_total_price"/>
                <field name="proposal_status"/>
            </tree>
        </field>
    </record>    

    <record model="ir.ui.view" id="proposal_form">
        <field name="name">proposal.form</field>
        <field name="model">proposals.proposals</field>
        <field name="arch" type="xml">
  	        <form string="PROPOSAL">
                <header>
                    <button name="action_proposal_mail_send" type="object" string="Sent Proposal" class="oe_highlight" attrs="{'invisible': [('state', 'in',['confirmed','cancel'])]}"/>
                    <button name="action_confirmed_proposal" type="object" string="Confirm Proposal" class="oe_highlight" attrs="{'invisible': [('state', '!=','sent')]}"/>
                    <button name="action_cancel_proposal" type="object" string="Cancel Proposal" attrs="{'invisible': [('state', '!=','sent')]}"/>
                    <field name="state" widget='statusbar'/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="preview_proposal"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-globe icon">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_text">Customer</span>
                                <span class="o_stat_text">Preview</span>
                            </div>
                        </button>
                    </div>
    		        <group>
    		            <group colspan="2" col="2">
        		            <div class="oe_title">
                                <h1>
                                    <field name="proposal_name" readonly="1"/>
                                </h1>
                            </div>
        		        </group>
                        <group colspan="4" col="4" >
                            <field name="sales_man_id" attrs="{'readonly': [('state', 'in', ('confirmed','cancel'))]}"/>
                            <field name="customer_id" attrs="{'readonly': [('state', 'in', ('confirmed','cancel'))]}"/>
                            <field name="price_list_id" attrs="{'readonly': [('state', 'in', ('confirmed','cancel'))]}"/>
                            <field name="proposal_date" readonly="1"/>
                        </group>
    	    	    </group>
                    <notebook>
                        <page string="Proposal Line">
                            <field name="proposal_line_ids" attrs="{'readonly': [('state', 'in', ('confirmed','cancel'))]}">
                                <tree editable ="bottom">
                                    <field name="product_id"/>
                                    <field name="description"/>
                                    <field name="qty_proposed"/>
                                    <field name="price_proposed"/>
                                    <field name="qty_accepted"/>
                                    <field name="price_accepted"/>
                                    <field name="proposed_sub_total" readonly="1"/>
                                    <field name="accepted_sub_total" readonly ="1"/>
                                </tree>
                            </field>
                            <div>
                                <table class="table table-sm" border="0px">
                                    <tr>
                                        <td class="text-right"><b><strong>Proposed Total:-</strong></b></td>
                                        <td class="text-left" width="10%"><b><strong>
                                            <span data-id="total_amount_11"  t-options='{"widget": "monetary", "display_currency": doc.price_list_id.currency_id}'><field name="proposed_total_price" readonly="1"/></span></strong></b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-right"><b><strong>Accepted Total:-</strong></b></td>
                                        <td class="text-left" width="10%"><strong>
                                            <b><span data-id="total_amount_11"  t-options='{"widget": "monetary", "display_currency": doc.price_list_id.currency_id}'><field name="accepted_total_price" readonly="1"/></span></b></strong>
                                        </td>
                                    </tr>
                                </table>
                                <!-- <group class="oe_subtotal_footer" colspan="1">
                                    <div class="text-right">
                                        <b><label for="proposed_total_price"/>
                                        <field name="proposed_total_price" readonly="1"/></b>
                                    </div>
                                </group>
                                <group class="oe_subtotal_footer" colspan="1">
                                    <div class="text-right">
                                        <b><label for="accepted_total_price"/>
                                            <field name="accepted_total_price" readonly="1"/></b>
                                    </div>
                                    
                                </group> -->
                            </div>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                
    		</form>
  	    </field>
	</record>

	<record id="proposal_search_view" model="ir.ui.view">
        <field name="name">proposal.search</field>
        <field name="model">proposals.proposals</field>
        <field name="arch" type="xml">
            <search>
                <field name="customer_id"/>
                <field name="sales_man_id"/>
                <filter string="Proposals" name="my_proposals" domain="[('state', 'not in', ['confirmed','cancel'])]"/>
                
                <group string="Group By">
                    <filter name="by_customers" string="Customers" context="{'group_by': 'customer_id'}"/>
                    <filter name="by_salesman" string="Salesman" context="{'group_by': 'sales_man_id'}"/>
                </group>
            </search>
        </field>
    </record>

  	<record model="ir.actions.act_window" id="action_proposal">
        <field name="name">Proposal</field>
        <field name="res_model">proposals.proposals</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_my_proposals': 1}</field>
  	</record>

    <menuitem id="menu_proposal" name="Proposal" parent="sale.sale_menu_root" sequence="10"
          />
  	
  	<menuitem id="menu_proposal_1" parent="menu_proposal" name="Proposal" sequence="10"
            action="action_proposal"/>
</odoo>