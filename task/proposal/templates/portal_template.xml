<odoo>
	
	<template id="porposal_portal_template" name="Order Proptal Template" inherit_id="portal.portal_sidebar" primary="True">
		<xpath expr="//div[hasclass('o_portal_sidebar')]" position="inside">
			<t t-set="o_portal_fullwidth_alert">    
                <t t-call="portal.portal_back_in_edit_mode">
                	 <t t-set="backend_url" t-value="'/web#return_label=Website&amp;model=%s&amp;id=%s&amp;action=%s&amp;view_type=form' % (proposal_order._name, proposal_order.id, proposal_order.env.ref('proposal.proposal_view').id)"/>
                	</t>
                </t>
            <div class="row mt16 o_portal_sale_sidebar">
			    	<t t-call="portal.portal_record_sidebar">
			    		<t t-set="classes" t-value="'col-lg-auto d-print-none'"/>
			    		<t t-set="title">
		                    <h2 class="mb-0">
			                    <b t-field="proposal_order.total" data-id="total_amount"/>
			                </h2>
			        	</t>
			          	<t t-set="entries">
			                <ul class="list-group list-group-flush flex-wrap flex-row flex-lg-column">
			                	<li class="list-group-item flex-grow-1">
			                        <div class="o_download_pdf btn-toolbar flex-sm-nowrap">
			                        	<div class="btn-group flex-grow-1 mr-1 mb-1">
			                        		 <a class="btn btn-secondary btn-block o_download_btn" t-att-href="proposal_order.get_portal_url(report_type='pdf', download=True)" title="Download"><i class="fa fa-download"/> Download</a>
			                        	</div>
			                        	<div class="btn-group flex-grow-1 mb-1">
			                                    <a class="btn btn-secondary btn-block o_print_btn o_portal_invoice_print" t-att-href="proposal_order.get_portal_url(report_type='pdf')" id="print_invoice_report" title="Print" target="_blank"><i class="fa fa-print"/> Print</a>
			                            </div>
			                        </div>
			                    </li>

			                    <li class="navspy list-group-item pl-0 flex-grow-1" t-ignore="true" role="complementary">
							            <ul class="nav flex-column bs-sidenav"/>							            
						        </li>
						</ul>
					</t>
				</t>

				<div id="quote_content" class="col-12 col-lg justify-content-end">
					            <div t-attf-class="card #{'pb-5' if report_type == 'html' else ''}">
				                	<div t-call="proposal.proposal_order_portal_content"/>
				           		</div>
				</div>

			</div>
				
				<div id="buttons_id" class="row justify-content-center text-center d-print-none pt-1 	pb-4" style='margin-left: 183px;'>
				<t t-if="proposal_order.state != 'confirm' ">
					<div class="col-sm-auto mt8 ">
                            <a role="button" class="btn btn-primary" id="accept_btn" data-toggle="modal"> <i class="fa fa-check"/>Accept</a>
                    </div>

                    <div class="col-sm-auto mt8">
                            <a role="button" class="btn btn-danger" id="reject_btn" data-toggle="modal"> <i class="fa fa-times"/> Reject</a>
                    </div>

                </t>

	                <t  t-else="">
							<h1>Thank You For Your Time</h1>
					</t>
	            </div>
		</xpath>
	</template>

	<template id="proposal_order_portal_content" name="Proposal Portal Content">
		<div id="introduction" t-attf-class="pb-2 pt-3 #{'card-header bg-white' if report_type == 'html' else ''}">

			<h2 class="my-0">
            	<span t-field="proposal_order.product_state_type"></span>
                <em t-esc="proposal_order.name"/>
            </h2>
        </div>

        <div t-attf-class="#{'card-body' if report_type == 'html' else ''}">
            <div id="information">
                <div t-att-data-order-id="proposal_order.id">
				</div>
				 <div class="mb-3">
                    <strong>Proposal Date:</strong> <span t-field="proposal_order.proposal_date" t-options='{"widget": "date"}'/>
                </div>

                <div class="mb-3">
                    <strong> Customer </strong>
                    <div>
                    <span t-field="proposal_order.customer_name"/><br/>
                    <span t-field="proposal_order.customer_name.street"/><br/>
                    <span t-field="proposal_order.customer_name.street2"/>
                    <span t-field="proposal_order.customer_name.city"/> ,
                    <span t-field="proposal_order.customer_name.country_id"/>
                </div>
            </div>
        </div>
        <section id="details" style="page-break-inside: auto;" class="mt32">
		        <h3 id="details">Pricing</h3>
                <table class="table table-sm" id="proposal_order_table">
                	<thead class="bg-100">
                        <tr>
                            <t t-set="colspan" t-value="6"/>
                            <th class="text-left">Products</th>
                            <th class='accepted_quantity text-left'>Quantity</th>
                            <th class="text-left">Price</th>
                        </tr>
                    </thead>

                    <tbody class="sale_tbody">
                    <t t-set="current_subtotal" t-value="0.0"/>
                    <input class="record_id" type="hidden"  t-att-value='proposal_order.id'/>
                    <t t-foreach="proposal_order.product_line" t-as="line">
                    	<tr>
                    		<td><span t-field='line.product'/>		
                    		</td>
                    		<td><span t-field='line.proposed_quantity'/>		
                    		</td>
                    		<td><span t-field='line.proposed_price'/>		
                    		</td>
                    		<td>
								<div class="number">
									<span class="minus">-</span>
									<input t-att-line_id='line.id' class='accepted_quantity' t-att-value="line.proposed_quantity" type="text" />
									<span class="plus">+</span>
								</div>
							</td>
							<td>
                    			<input class='accept_price' t-att-value="line.proposed_price" type="text" style='width: 100px;'/>
							</td>
						</tr>
					</t>
				</tbody>
			</table>

				<div id="total" class="row" name="total" style="page-break-inside: avoid;">
	            <div t-attf-class="#{'col-4' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
	            	<table class="table table-sm">
	                    <tr class="border-black" style="border-bottom:1px solid #dddddd;">
	                    	 <td><strong>Subtotal</strong></td>
	                        <td class="text-left">
	                        <span class="text-right"
	                        data-id="untaxed_amount"
	                        t-field="proposal_order.untaxed_amount"
	                    /></td>
	                </tr>
	                <tr class="border-black" style="border-bottom:1px solid #dddddd;">
	                        <td><strong>Total</strong></td>
	                        <td class="text-left">
	                        <span class="text-right"
	                        data-id="total"
	                        t-field="proposal_order.total"

	                    /></td>
	                    </tr>
					</table>
				</div>
			</div>
		</section>
	</div>
	</template>

</odoo>